# Reex67 ビルドガイド
## はじめに
![000](https://github.com/kushima8/Reex/assets/58157342/9d3c4d45-e07b-4a00-93d6-5cd17bdf3c89)

このたびはご購入いただきありがとうございます。<br>
本製品は組み立てが必要なキットです。<br>

作成にあたり不明点や疑問点などがありましたら、作者の[Twitterアカウント](https://twitter.com/kushima8)までご連絡ください。<br>
Twitter以外で連絡を頂いても対応が厳しいです。<br>
FF外からのリプライは通知オフにしており気づかない場合がこざいますご了承ください。<br>
それとDiscordのコミュニティなどで作者以外の方だけに不明点や疑問点などを質問することは非推奨です。<br>

Reex67は各種ブレークアウトボードを接続して拡張することを主眼に開発したモジュラー式キーボードです。<br>
使用するキーキャップについては[キーレイアウト](http://www.keyboard-layout-editor.com/##@@=Esc&=!%0A1&=%2F@%0A2&=%23%0A3&=$%0A4&=%25%0A5&=%5E%0A6&_x:3.75%3B&=%2F&%0A7&=*%0A8&=(%0A9&=)%0A0&=%2F_%0A-&=+%0A%2F=&=%7C%0A%5C&=~%0A%60&=DEL%3B&@_w:1.5%3B&=Tab&=Q&=W&=E&=R&=T&_x:3.75%3B&=Y&=U&=I&=O&=P&=%7B%0A%5B&=%7D%0A%5D&_w:1.5%3B&=Backspace%3B&@_w:1.75%3B&=Ctrl&=A&=S&=D&=F&=G&_x:3.75%3B&=H&=J&=K&=L&=%2F:%0A%2F%3B&=%22%0A%27&_w:2.25%3B&=Enter%3B&@_w:2.25%3B&=Shift&=Z&=X&=C&=V&=B&_x:3.75%3B&=N&=M&=%3C%0A,&=%3E%0A.&=%3F%0A%2F%2F&_w:1.75%3B&=Shift&=%E2%86%91&=Fn%3B&@_w:1.5%3B&=Ctrl&=Fn&_w:1.25%3B&=GUI&_x:2&w:1.5%3B&=Space&_x:3&w:1.25%3B&=Space&_x:2.25&w:1.5%3B&=GUI&=ALT&_x:0.5%3B&=%E2%86%90&=%E2%86%93&=%E2%86%92)を確認してください。<br>

写真は作成見本であり商品内容と同一ではありません。<br>
また仕様は予告なく変更されることがあります。<br>

完成品、未完成品にかかわらずヤフオク!やメルカリなどのネットオークションやフリマなどでの販売、転売は禁止しております。<br>
Boothや遊舎工房など作者本人が販売または委託している箇所以外で購入された場合、同梱品の不足や不良品の対応などの各種サポートが厳しいためです。<br>
もし発見した場合は対応します。<br>
ご理解のほどよろしくお願いいたします。<br>

ファームウェアに[qmk_firmware](https://github.com/qmk/qmk_firmware)を採用しています。<br>
QMKにReex67のコードはまだマージされていませんのでこの[ブランチ](https://github.com/kushima8/qmk_firmware/tree/reex)を使用してください。<br>

キット作成前にPro Microの書き込み環境の構築を行ってください。<br>
ファームウェアの書き込み環境の構築については下記のサリチル酸さんのサイトを参考にしてください。<br>
[（初心者編）自作キーボードにファームウェアを書き込む](https://salicylic-acid3.hatenablog.com/entry/qmk-toolbox)<br>

キー割り当ての変更方法などはご自身でお調べいただくようお願いします。<br>

GUIから簡単にキー割り当てを変更できる[VIA](https://caniusevia.com/)と[Remap](https://remap-keys.app/)に対応しております。<br>
各種キー割り当ても含めLEDの光度などの設定できますのでご活用ください。<br>
VIAとRemapについては下記のサリチル酸さんのサイトを参考にしてください。<br>
[（初心者編）VIAを使ってキーマップを書き換えよう](https://salicylic-acid3.hatenablog.com/entry/via-manual)<br>
[（初心者編）Remapを使ってキーマップを書き換えよう](https://salicylic-acid3.hatenablog.com/entry/remap-manual)<br>

[プレートデータ](https://github.com/kushima8/Reex/tree/main/Reex67/Plate)データを公開しています。<br>
アルミプレートなど作成したい場合にお使いください。<br>

[センサブレイクアウトボート](https://github.com/kushima8/PMW3360)に関してもケース含めデータを公開しています。<br>
ご自由にお使いください。<br>

以下の部品リストを参考に欠品がないか確認をお願いします。<br>
欠品や不良品などがありましたら確認したのちに対応いたします。<br>
ただし、海外など発送が難しい場合はこちらの指定する方法での一部返金などで対応します。<br>
あらかじめご了承ください。<br>

## 部品

### キットに付属しているもの

|名称|数量|備考|
|----|:---:|----|
|PCB|2枚|右側用、左側用各1枚ずつ|
|トッププレート|2枚|右側用、左側用各1枚ずつ|
|ボトムプレート|2枚|右側用、左側用各1枚ずつ|
|M2 2.5mmスペーサー(CB-2002.5E)|4個|丸型中空|
|M2 3mmスペーサー(ARB-2003E)|10個|丸型両メネジ|
|M2 3.5mmスペーサー(ARB-2003.5E)|4個|丸型両メネジ|
|M2 4mmスペーサー(ARB-2004E)|2個|丸型両メネジ|
|M2 6mmスペーサー(ARB-2006E)|3個|丸型両メネジ|
|M2 7.5mmスペーサー(ARB-2007.5E)|10個|丸型両メネジ|
|M2 10mmスペーサー(ARB-2010E)|3個|丸型両メネジ|
|M2 4mmネジ|14本|
|M2 10mmネジ|17本|
|Kailh PCB ソケット(MX用)|69個|
|ダイオード(1N4148W)|86個|
|タクトスイッチ|2個|
|TRRSジャック(MJ-4PP-9)|2個|
|PMW3360DM-T2QU|1個|レンズ付き|
|PMW3360ブレイクアウトボード|1枚|
|トラックボールケース|2個|ローマウントとハイマウント1個ずつ|
|ステンレスミニアチュアベアリング(3×6×2.5mm)|3個|
|六角ナット(M3 厚さ2.4mm)|3個|
|(+)ナベ頭小ねじ(M3 10mm)|3個|
|コンスルーピンヘッダ(2.5mm 8PIN)|1個|
|ゴム足|8個|

### 別途、購入が必ず必要なもの
以下の部品は別途購入してください。

|名称|数量|備考|
|----|:---:|----|
|キースイッチ(Cherry MX互換)|67個|
|キーキャップ(Cherry MX互換)|67個|
|Pro Micro|2個|※|
|コンスルーピンヘッダ(2.5mm 12PIN)|4個|
|TRRSケーブル|1本|
|トラックボール(34mm)|1個|
|2Uスタビライザー(Cherry MX互換)|2個|

※動作確認しているPro Microは以下の通りになります。  
　下記以外のPro Microを使用する場合は動作しないことがあります。  
　使用する場合はご自身で調整してください。  
　Pro Micro（単体）黒基盤/青基盤  
　https://shop.yushakobo.jp/products/pro-micro?variant=42225070768359

### オプション
以下の部品はオプション品です。  
キーボードを光らせたいなどの場合のみ別途購入してください。  

|名称|数量|備考|
|----|:---:|----|
|LEDチップ(YS-SK6812MINI-E)|75個|
|OLEDモジュール|2個|
|OLED用ピンソケット|2個|

※一部画像に制作手順が似ているReex56の画像を使用しております。

## 組み立て
* 表面<br>
  ![001](https://user-images.githubusercontent.com/58157342/235357313-13d7023a-acab-47f3-b83d-3a4f1b03639b.JPG)
* 裏面<br>
  ![002](https://user-images.githubusercontent.com/58157342/235357307-ea3549e0-3e75-48d4-bdab-276dff7fa3f5.JPG)
* 1.ヤスリがけ
  * 製造の都合上PCBにバリが存在します。<br>
  ![101](https://user-images.githubusercontent.com/58157342/235357638-84f5645b-4426-4e03-bb01-f1146bae44f7.jpg)
  * 赤丸の箇所を市販されている紙ヤスリなどで研磨してください。
* 2.Pro Microのはんだ付け
  * チップが載っている面が内側になるようにし、コンスルーピンヘッダを取り付けはんだ付けをしてください。
  * コンスルーピンヘッダには取り付け方向があるため気をつけてください。
  * [コンスルー - Self-Made Keyboards in Japan - ](https://scrapbox.io/self-made-kbds-ja/%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%AB%E3%83%BC)<br>
  ![006](https://user-images.githubusercontent.com/58157342/89108152-21b31980-d471-11ea-9df6-11b106120852.JPG)
* 3.ファームウェアの書き込み
  * [reex67_test.hex](https://github.com/kushima8/Reex/tree/main/Reex67/HEX/reex67_test.hex)を指定してファームウェアを書き込んでください。
* 4.センサーのはんだ付け
  * ブレイクアウトボードの既にICがはんだ付けされている⾯を表にし、4PINが2列になっている方を左側してください。
  * センサーチップの⽂字が書かれている⽅を下にしてブレイクアウトボードにセットしたあと、裏面からはんだ付けをしてください。
  * はんだ付けが終わったらセンサに貼られているシールを剥がしてください。<br>
 ![007](https://user-images.githubusercontent.com/58157342/234977113-6e89267d-3d36-472c-bedd-ed22745bed6f.JPG)
  * レンズのガイドポストを変形させることで、レンズをセンサに固定できます。  
  * 固定する場合は一度本機を完成させトラックボールが動くことを確認したのち、レンズをセンサにキッチリはめ込んだ状態ではんだごてなどを使い画像赤丸部分のガイドポストをセンサに触れないように溶かし変形させ固定してください。  
  * 高温すぎるとガイドポスト溶けすぎてしまうので、はんだごでなのでネジを熱し、熱したネジをガイドポストに押し付けるなどで変形させるとうまくいきます。<br>
 ![007](https://github.com/kushima8/Reex/assets/58157342/f45a5577-e6f4-44ea-a4c2-97e3ce7bba15)
* 5.トラックボールケースの作成
  * 本キットでは基本的にローマウント版を使用します。
  * 同梱されているハイマウント版はオマケです。
  * ハイマウント版はブレイクアウトボードの上に直接置いて使えるように設計しております。
  * 左：ローマウント  右：ハイマウント
　　![001](https://github.com/kushima8/Reex/assets/58157342/8a78b063-16f9-4286-8d3e-3098f63cdd9f)
  * PMW3360ブレイクアウトボードを流用したものを作成する場合にご利用ください。
  * ケースは突起のある方が表側、その突起が2つある⽅が上、突起が1つの方が下となります。
  * 初めに上側のネジ⽳にM2 10mmネジを⼀つづ⼊れます。<br>
  ![007](https://user-images.githubusercontent.com/58157342/234977202-8e4176d8-7a0e-4f62-ad2a-53df21a2acc8.JPG)
  * その後ベアリングを入れたM3 10mmネジを突起の穴に入れます。
  * 入れる方向などは下記画像を参考にしてください。
  * 設置後、六角ナットで固定してください。
  * 固定する際突起部分とベアリング部分を完全に密着せず若干ながら隙間を作るようにしてください。
  * 密着しすぎるとベアリングがうまく回らない場合があります。<br>
  ![007](https://user-images.githubusercontent.com/58157342/234977353-ee923e26-73f6-49c2-a75a-65f784d3f31f.JPG)
  * ケースを裏返して、M2 10mmネジを画像の三箇所に挿入してください。
  * 挿入後、M2 6mmスペーサー、M2 10mmスペーサーの順でネジに取り付けます。
  * これは玉飛び出し防止用の支柱になります。<br>
  ![007](https://user-images.githubusercontent.com/58157342/234977419-2490f4e2-41cc-4ec2-8b80-28b67c1d7c68.JPG)
  ![007](https://user-images.githubusercontent.com/58157342/234977441-af8062cf-d598-4191-a983-1763e4bfcdbd.JPG)
  * 一旦この状態でトラックボールを置き、干渉の確認をしてください。
  * ケース本体は3Dプリンタで製造しており、玉と支柱のクリアリングは非常にタイトな設計な為、個体差によっては玉と支柱が干渉する場合があります。
  * 干渉する場合、支柱取り付けようのネジ穴を棒ヤスリなどで外側へ拡張し、干渉しない用に加工してください。
  * 下部にトラックボールユニットを取り付ける場合は親指が触れる位置の支柱を取り除くことをオススメします。<br>
  ![007](https://user-images.githubusercontent.com/58157342/234977559-4c228023-505e-4b5f-968f-0b2bf56898ee.JPG)
* 6.LEDチップのはんだ付け(オプション)
  * 高い温度ではんだ付けを行うとLED破損の可能性がありますので、約270℃に設定してはんだ付けをするようにしてください。
  * 基板裏面のL字のシルクのマークの位置にLEDの足が欠けている箇所が来るように設置し、はんだ付けを行ってください。
  * はんだ付けが完了したら一度Pro Microを取り付け、LEDが光るかどうかテストを行ってください。<br>
  ![007](https://user-images.githubusercontent.com/58157342/235355921-1354467d-84a3-4f3a-8509-fb9a4f4fa55c.JPG)
* 7.ダイオードのはんだ付け
  * PCB裏面のダイオード取り付け箇所の片側にあらかじめはんだを盛ります。<br>
  ![009](https://user-images.githubusercontent.com/58157342/235355932-582773ac-0297-486f-9d9d-38ceec4ec68d.JPG)
  * その後、線が書いてある方を右(三角形の頂点の先に縦棒がある方)にセットします。
  * ダイオードをピンセットで持ちつつ、あらかじめはんだを盛った箇所をはんだごてで加熱して片側だけはんだ付けを行います。<br>
  ![011](https://user-images.githubusercontent.com/58157342/235355944-de88b059-5ad2-4e4e-bc99-c47b513f341d.JPG)
  * 片側のはんだ付けが完了後、もう片方もはんだ付けを行ってください。
* 8.Kailh PCB ソケット(MX用)のはんだ付け
  * PCB裏面のソケット取り付け箇所にあらかじめはんだを盛ります。<br>
  ![013](https://user-images.githubusercontent.com/58157342/235356066-d18ef48f-6783-4fd2-8ebc-03fe0831a4c9.JPG)
  * 中央の穴に干渉しないようにソケットをPCB裏面に設置しはんだ付けを行ってください。<br>
  ![014](https://user-images.githubusercontent.com/58157342/235356071-fc5e40a4-901d-4b54-aa71-74d706167bc4.JPG)
* 9.タクトスイッチはんだ付け
  * PCB表面から取り付け、裏面からはんだ付けを行ってください。
* 10.TRRSジャックのはんだ付け
  * PCB表面から取り付け、裏面からはんだ付けを行ってください。
* 11.OLEDの取り付け(オプション)
  * OLEDモジュールとピンヘッダのハンダ付けを行ってください。
  * ピンソケットをPCB表面から取り付け、裏面からはんだ付けを行ってください。
* 12.トラックボールユニットの取り付け
  * トラックボールユニットは画像赤丸の六箇所から選択が可能です。<br>
  ![021](https://user-images.githubusercontent.com/58157342/235357640-e37dff62-4a3e-47e0-bd86-e55d633fddee.jpg)
  * 中央上部と中央下部の場合は12.1を、下段の場合は12.2を参考に取り付けてください。
  * 12.1 中央上部と中央下部取り付け
    * ケース下側のネジ⽳にM2 10mmネジを⼀つづ⼊れてください。
    * PCB上面にケースを配置してください。<br>
    ![021](https://user-images.githubusercontent.com/58157342/234977689-28ddbb9d-8a2d-4e13-a384-6e2fb36d7c43.JPG)
    * PCB裏側からコンスルーを取り付け、ネジにM2 2.5mmスペーサーを通してください。<br>
    ![021](https://user-images.githubusercontent.com/58157342/234977729-02b9e42d-dd73-44de-a8c7-8c59aa1ccf1d.JPG)
    * その後ブレイクアウトボードを取り付けてください。
    * ブレイクアウトボード取り付け後、M2 3.5mmスペーサーを設置してください。<br>
    ![021](https://github-production-user-asset-6210df.s3.amazonaws.com/58157342/242346360-297ad832-d8ab-4e06-a200-3d574702ee2d.JPG)
  * 12.2 下段取り付け
    * ケース下側のネジ⽳にM2 10mmネジを⼀つづ⼊れください。
    * 先程入れた下側ネジにM2 4mmスペーサーを取り付けます。
    * PCB上面にケースを配置してください。<br>
    ![021](https://user-images.githubusercontent.com/58157342/234978533-24ca9088-0ebc-4edd-8e5d-b8f454482ecc.JPG)
    * PCB裏側からコンスルーを取り付け、ネジにM2 2.5mmスペーサーを通してください。<br>
    ![021](https://user-images.githubusercontent.com/58157342/234978630-42d41a7e-e29c-4988-b2a7-3a5f40a5a08d.JPG)
    * その後ブレイクアウトボードを取り付けてください。
    * ブレイクアウトボード取り付け後、M2 3.5mmスペーサーを設置してください。<br>
    ![021](https://user-images.githubusercontent.com/58157342/234978791-1755cf51-db6c-41f8-82b0-c8562bdb5ab6.JPG)
* 13.キースイッチの取り付け
  * トッププレートの穴にキースイッチを取り付けてください。<br>
  ![030](https://user-images.githubusercontent.com/58157342/235356355-3dde26da-10a3-4e54-87d6-cc1b0c695376.JPG)
* 14.トッププレートの取り付け
  * トッププレート上面のネジ穴からM2 10mmネジを通し、M2 3mmスペーサーで固定してください。
  * PCBとネジ穴とキースイッチが合うようにトッププレートをPCB表面に設置。
  * 設置後、PCB裏面に飛び出たネジにM2 7.5mmスペーサーを取り付けてください。<br>
  ![032](https://user-images.githubusercontent.com/58157342/235355956-e6c5741a-28ca-46ee-8a67-bb35bb42839a.JPG)
* 15.ボトムプレートの取り付け。
  * スペーサーとボトムプレートのネジ穴の位置を合わせ、M2 4mmネジで固定してください。<br>
* 16.Pro Microの取り付け
  * Pro Microを取り付け、PCと接続しREMAPなどを用いてキースイッチの入力の確認を行ってください。
* 17.OLEDモジュールの取り付け(オプション)
  * OLEDモジュールを取り付け、PCと接続し、表示されることの確認を行ってください。
* 18.キーキャップの取り付け
  * キースイッチにキーキャップを取り付けてください。
* 19.ゴム足の取り付け
  * ボトムプレートにゴム足を取り付けください。

組み立ての手順は、以上です。

### 用意しているファームウェアについて
3種類ほどこちらにてコンパイル済みの[ファームウェア](https://github.com/kushima8/Reex/tree/main/Reex67/HEX)を用意しております。  
中身についてはこちらの[QMK](https://github.com/kushima8/qmk_firmware/tree/reex)にて確認してください。  
以下簡単な説明になります。  
独自追加キーコードに関しては[addition_keycode](https://github.com/kushima8/Reex/tree/main/Common/addition_keycode.md)にて確認してください。  
  
* reex67_default.hex
  * VIA対応
  * レイヤー4枚
  * 2番レイヤーのみボールを一定動かすと3番レイヤー(マウスレイヤー)に自動遷移  
    ボールを停止して一定時間経過か、LCTRLと設定したマウスキーやスクロールキー以外を押下すると遷移前レイヤーに戻る  
* reex67_test.hex
  * 動作確認用
  * VIA対応
  * レイヤー1枚
