# 1キー拡張 ビルドガイド

## はじめに
1キー拡張はReex67の下記画像赤枠の位置へのみ取り付け可能です。
  
![000](https://github.com/kushima8/Reex/assets/58157342/8cc824f0-6271-415a-b8aa-4e33cc567823)
![001](https://github.com/kushima8/Reex/assets/58157342/d06c4f7d-4a18-4441-8cb6-8ce5c2adb3e7)

キー拡張は同一側に一つのみ増設可能です。  
ロータリーエンコーダ拡張、トラックボール拡張との同一側での併用は可能です。  
（例：○ 右側 1キー拡張＋ロータリーエンコーダ拡張、左側 3キー拡張＋トラックボール拡張
　　：✕ 右側 ロータリーエンコーダ拡張＋トラックボール拡張　左側 拡張なし 
　　：✕ 右側 拡張なし　左側  ロータリーエンコーダ拡張＋トラックボール拡張 ）

## 部品

|名称|数量|備考|
|----|:---:|----|
|PCB|1枚|
|M2 2mmスペーサー(CB-2002E)|2個|丸型中空|
|M2 7.5mmスペーサー(ARB-2007.5E)|2個|丸型両メネジ|
|M2 11mmスペーサー(ARB-20011E)|2個|丸型両メネジ|
|M2 4mmネジ|4本|
|M2 10mmネジ|4本|
|Kailh PCB ソケット(Cherry MX用)|2個|
|ダイオード(1N4148W)|3個|

### 別途、購入が必ず必要なもの
以下の部品は別途購入してください。

|名称|数量|備考|
|----|:---:|----|
|キースイッチ(Cherry MX互換)|1個|
|キーキャップ(Cherry MX互換)|1個|
|電線|3本|
|スルーホール用テストワイヤ|3本|サンハヤト スルーホール用テストワイヤー TTW-200など|

## 組み立て
※拡張基板はリバーシブルPCBとなっております。  
　使用する位置とキーキャップの大きさにより実装面が変わります。  
　適宜説明内容を読み替えてご覧ください。  
　下記赤枠はキースイッチ取り付け位置です。  
　ソケットの実装は赤枠の裏に行ってください。  

  ![002](https://github.com/kushima8/Reex/assets/58157342/4b6325ff-d3ba-44c5-8215-0f70e960622b)

* 1.7Pinコンスルー加工と差し替え
  * Reex基盤本体とトラックボール用センサーボードの接続に用いている8Pinコンスルーをニッパーなどを使い7Pinコンスルーに加工します。  
  * 8Pinコンスルーの右から三番目のPinをニッパーなどで切除してください。
  
  ![000](https://github.com/kushima8/Reex/assets/58157342/e855b6f8-ed85-4577-9491-9a3f3db513a9)
  * Reex基盤本体の接続部分の右から三番目のPin（F6）に7PinコンスルーのPinが無くなっている部分が来るようにセンサボードと接続するようにしてください。
  
  ![001](https://github.com/kushima8/Reex/assets/58157342/729b627e-7b1c-4b00-ad64-1256854cb8d2)
* 2.ファームウェアの書き込み
  * [reex67mod_default.hex](https://github.com/kushima8/Reex/tree/main/Reex67/HEX/mod/reex56mod_default.hex)を指定してファームウェアを書き込んでください。
* 3.ダイオードのはんだ付け
  * PCB裏面のダイオード取り付け箇所の片側にあらかじめはんだを盛ります。  
  * その後、線が書いてある方を右(三角形の頂点の先に縦棒がある方)にセットします。
  * ダイオードをピンセットで持ちつつ、あらかじめはんだを盛った箇所をはんだごてで加熱して片側だけはんだ付けを行います。  
  * 片側のはんだ付けが完了後、もう片方もはんだ付けを行ってください。
* 4.Kailh PCB ソケット(Cherry MX用)のはんだ付け
  * PCB裏面のソケット取り付け箇所にあらかじめはんだを盛ります。  
  * 中央の穴に干渉しないようにソケットをPCB裏面に設置しはんだ付けを行ってください。  
* 5.本体への取り付け
  * Reex本体のボトムプレートを外します。  
  * 画像赤枠の部分に  
  　・拡張基盤  
  　・2mmスペーサー  
  　・Reex本体基盤  
  　・7.5mmスペーサー  
  となるようにセットし、上から10mmネジで固定してください。  
     
  ![003](https://github.com/kushima8/Reex/assets/58157342/5b2240a8-f2ca-4024-a4ef-9dead3db05cd)
  ![013](https://github.com/kushima8/Reex/assets/58157342/1ecca9d5-7ec1-409a-ab74-a7d17b140bfb)
  その後拡張基盤下部に  
  　・拡張基盤  
  　・11mmスペーサー  
  となるようにセットし、上から10mmネジで固定してください。  
* 6.疎通テスト
  * 拡張基盤とReex本体基盤をテストワイヤで繋いでください。
  * TTW-200であればスルーホールに差し込むだけで接続できます。
  * 接続箇所は拡張基盤の印字とReex本体基盤の拡張取り付け部位近くにある印字が合うようにしてください。
  * Reex本体基盤の複数同じ印字がありますが、どちらに刺しても問題ありません。
  * 配線に関しては下記が画像を参考にしてください。
     
  ![004](https://github.com/kushima8/Reex/assets/58157342/67bf763e-5240-454a-bdf7-27dcf03619a6)
  * 接続後、キースイッチを取り付け入力可能かテストを行ってください。
  * 接続位置の都合上TECSEE Pudding Mediumなど通常よりロープロファイルのスイッチを使用することをおすすめします。  
  * 問題なければボトムプレートを配置し、4mmネジで固定してください。
* 7.電線のはんだ付け
  * この工程を行うと拡張基盤の取り外しが困難になります。
  * テストワイヤで接続した状態で、十分操作感などを確かめ変更の余地がないと確認後、この工程に進むようにしてください。
  * テストワイヤを外し電線と入れ替えるような形で拡張基板と本体基盤にはんだ付けを行い接続してください。

組み立ての手順は、以上です。
